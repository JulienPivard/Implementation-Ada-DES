--  Dernière modification : Dimanche 24 mars[03] 2019
--  auteur : PIVARD Julien
with "aunit";
with "../des.gpr";

project Des_Unitaire is

   Fichier_Principal             := "main_test_harnais.adb";
   Nom_Executable                := "test_unitaire_executable";

   --  Le nom du fichier qui contient la procédure principale.
   for Main                      use (Fichier_Principal);

   --  Pour ignorer des fichiers sources de la compilation
   for Ignore_Source_Sub_Dirs    use (".git");
   --  Le ** permet d'inclure tous les sous répertoire.
   for Source_Dirs               use ("src_tests_unitaire/**");

   for Object_Dir                use "obj/";
   for Exec_Dir                  use "bin/";

   --  https://gcc.gnu.org/onlinedocs/gcc-4.7.4/gnat_ugn_unw/index.html
   Options :=
      (
         --  -gnata active les assertions. Pragma assert, debug, Check,
         --  Precondition, et Postcondition
         "-gnata"
      ) & Des.Options;

   --  Pour un bon tuto
   --  https://docs.adacore.com/gprbuild-docs/html/gprbuild_ug.html
   package Naming is   --<<<  Pour changer les noms

      --  Pour lier le nom dans le code et le nom du fichier de spec
      --for Spec ("MyPack.MyChild") use "mypack.mychild.spec";
      --  Même chose mais pour le corps.
      --for Body ("MyPack.MyChild") use "mypack.mychild.body";

   end Naming;

   package Builder is  --<<<  pour gprbuild

      --  Pour changer le nom du binaire de main_test_harnais à
      --  test_unitaire_executable après le use.
      for Executable ("main_test_harnais.adb") use Nom_Executable;

   end Builder;

   package Compiler is --<<<  pour le compiler

      for Default_Switches ("Ada") use Options;

   end Compiler;

   --  Uniquement pour ada.
   --  Vas créer des fichiers « sources » pour élaborer les interruptions
   --  initialiser les variables globales ...
   package Binder is   --<<<  pour le binder
   end Binder;

   package Linker is   --<<<  pour le linker
   end Linker;

end Des_Unitaire;
